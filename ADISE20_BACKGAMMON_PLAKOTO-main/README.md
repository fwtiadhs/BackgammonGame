# ADISE20_BACKGAMMON_PLAKOTO

Table of Contents
=================
   * [Εγκατάσταση](#εγκατάσταση)
      * [Απαιτήσεις](#απαιτήσεις)
      * [Οδηγίες Εγκατάστασης](#οδηγίες-εγκατάστασης)
   * [Περιγραφή API](#περιγραφή-api)
      * [Methods](#methods)
         * [Board](#board)
            * [Ανάγνωση Board](#ανάγνωση-board)
            * [Αρχικοποίηση Board](#αρχικοποίηση-board)
         * [Piece](#piece)
            * [Ανάγνωση Θέσης/Πιονιού](#ανάγνωση-θέσηςπιονιού)
            * [Μεταβολή Θέσης Πιονιού](#μεταβολή-θέσης-πιονιού)
         * [Player](#player)
            * [Ανάγνωση στοιχείων παίκτη](#ανάγνωση-στοιχείων-παίκτη)
            * [Καθορισμός στοιχείων παίκτη](#καθορισμός-στοιχείων-παίκτη)
         * [Status](#status)
            * [Ανάγνωση κατάστασης παιχνιδιού](#ανάγνωση-κατάστασης-παιχνιδιού)
      * [Entities](#entities)
         * [Board](#board-1)
         * [Players](#players)
         * [Game_status](#game_status)


# Demo Page

Μπορείτε να κατεβάσετε τοπικά ή να επισκευτείτε την σελίδα: https://users.iee.ihu.gr/~it164777/ADISE20_BACKGAMMON_PLAKOTO/index.html




# Εγκατάσταση

## Απαιτήσεις

* Apache2
* Mysql Server
* php

## Οδηγίες Εγκατάστασης

 * Κάντε clone το project σε κάποιον φάκελο <br/>
  `$ git clone https://github.com/iee-ihu-gr-course1941/ADISE20_BACKGAMMON_PLAKOTO`

 * Βεβαιωθείτε ότι ο φάκελος είναι προσβάσιμος από τον Apache Server. πιθανόν να χρειαστεί να καθορίσετε τις παρακάτω ρυθμίσεις.

 * Θα πρέπει να δημιουργήσετε στην Mysql την βάση με όνομα 'schema' και να φορτώσετε σε αυτήν την βάση τα δεδομένα από το αρχείο db/schema.sql

 * Θα πρέπει να φτιάξετε το αρχείο lib/config_local.php το οποίο να περιέχει:
```
    <?php
	$DB_PASS = 'κωδικός';
	$DB_USER = 'όνομα χρήστη';
    ?>
```

# Περιγραφή Παιχνιδιού

Το παιχνίδι παίζεται ως εξής: 
Όπως και στο παιχνίδι Πόρτες, έτσι και στο Πλακωτό, τα πούλια μπορούν να τοποθετηθούν στην αριστερή ή δεξιά μεριά του ταμπλό.
Σε αντίθεση όμως με το παιχνίδι Πόρτες, τα πούλια είναι τοποθετημένα μπροστά σου. Επομένως, στην αριστερή διαμόρφωση μετακινούμε τα πούλια μας αντίθετα
από τους δείκτες του ορολογιού, και ο/η αντίπαλος σύμφωνα με τους δείκτες του ορολογιού. Αντιστρόφως, στη δεξιά διαμόρφωση εμείς μετακινούμε τα πούλια σύμφωνα 
με τους δείκτες του ορολογιού, και ο/η αντίπαλόας μας αντίθετα από τους δείκτες του ορολογιού. Μετακίνηση των πούλιων Ρίχνουμε τα ζάρια για να δούμε κατά πόσες 
θέσεις θα μετακινήσουμε ένα ή περισσότερα πούλια. Εκτός από τον πιο σημαντικό κανόνα, στο παιχνίδι Πλακωτό ισχύουν οι εξής κανόνες: Μπορούμε να χτυπήσουμε ένα μονό 
πούλι του αντίπαλού μας. Αν το χτυπήσουμε, αυτό το πούλι παγιδεύεται, και δεν μπορεί να μετακινηθεί. Μπορούμε να τοποθετήσουμε όσα πούλια θέλουμε πάνω από το παγιδευμένο 
πούλι Σημείωση, αν ένα πούλι παγιδευτεί στην Inner Table περιοχή, τότε δεν μπορούμε να το μαζέψουμε. Συνεπώς, αν ρίξουμε τα ζάρια και οι μόνες κινήσεις είναι να μαζέψουμε 
αυτό το πούλι ή να το μετακινήσουμε, χάνουμε τη σειρά μας. Για παράδειγμα ας θεωρήσουμε την ακόλουθη κατάσταση: Έχουμε πούλια στις θέσεις 1, 2 και 4, και το πούλι στη θέση 
4 είναι παγιδευμένο. Αν ρίξουμε τα ζάρια και φέρουμε 2 – 5, τότε το μονο που επιτρέπεται να κάνουμε είναι να μαζέψουμε το πούλι από τη θέση 2, και μετά τελειώνει τη σειρά μας.
Αντιθέτως, αν είχαμε φέρει 3 – 5, δε θα μπορούσαμε να κάνουμε καμία κίνηση, και θα χάναμε τη σειρά μας.

Η βάση μας κρατάει τους πίνακες board,players,game_status

Η εφαρμογή απαπτύχθηκε μέχρι το σημείο: 

1.  Αρχικοποίηση σύνδεσης-authentication (χωρίς password).
2.  Αναγνώριση σειράς παιξιάς.
3.  Υλοποίηση WebAPI.
4.  Το APΙ χρησιμοποιεί json μορφή για τα δεδομένα.
5.  Abord του παιχνιδιού μετά από κάποια λεπτά αδράνειας.
6.  Responsive GUI
7.  Εναλλαγή του board αναλόγα με το χρώμα του παίκτη.
8.  PvP 
9.  Η κατάσταση του παιχνιδιού αποθηκεύεται πλήρως σε mysql.
10. Ο πρώτος παίκτης αρχικοποιεί το board και περιμένει αντίπαλο όπου χρειάζεται.

Στόχοι που δεν υλοποίθηκαν:
1. Computer-human 
2. Έλεγχος νόμιμης κίνησης.
3. Δεν υπάρχει αναγνώριση DeadLock

## Συντελεστές

Βασιλείου Γεώργιος 154602

Τσιόκα Ελένη 164767 

Φωτιάδης Δημήτρης 164772

Χατζής Σταμάτης 164777


# Περιγραφή API

## Methods


### Board
#### Ανάγνωση Board

```
GET /board/
```

Επιστρέφει το [Board](#Board).

#### Αρχικοποίηση Board
```
POST /board/
```

Αρχικοποιεί το Board, δηλαδή το παιχνίδι. Γίνονται reset τα πάντα σε σχέση με το παιχνίδι.
Επιστρέφει το [Board](#Board).

### Piece
#### Ανάγνωση Θέσης/Πιονιού

```
GET /board/piece/:x/:y/
```

Κάνει την κίνηση του πιονιού από την θέση x,y στην νέα θέση. Προφανώς ελέγχεται η κίνηση αν είναι νόμιμη καθώς και αν είναι η σειρά του παίκτη να παίξει με βάση το token.
Επιστρέφει τα στοιχεία από το [Board](#Board-1) με συντεταγμένες x,y.
Περιλαμβάνει το χρώμα του πιονιού και τον τύπο.

#### Μεταβολή Θέσης Πιονιού

```
PUT /board/piece/:x/:y/
```
Json Data:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `x`               | Η νέα θέση x                | yes        |
| `y`               | Η νέα θέση y                | yes        |

Επιστρέφει τα στοιχεία από το [Board](#Board-1) με συντεταγμένες x,y.
Περιλαμβάνει το χρώμα του πιονιού και τον τύπο


### Player

#### Ανάγνωση στοιχείων παίκτη
```
GET /players/:p
```

Επιστρέφει τα στοιχεία του παίκτη p ή όλων των παικτών αν παραληφθεί. Το p μπορεί να είναι 'B' ή 'W'.

#### Καθορισμός στοιχείων παίκτη
```
PUT /players/:p
```
Json Data:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `username`        | Το username για τον παίκτη p. | yes      |
| `color`           | To χρώμα που επέλεξε ο παίκτης p. | yes  |


Επιστρέφει τα στοιχεία του παίκτη p και ένα token. Το token πρέπει να το χρησιμοποιεί ο παίκτης καθόλη τη διάρκεια του παιχνιδιού.

### Status

#### Ανάγνωση κατάστασης παιχνιδιού
```
GET /status/
```

Επιστρέφει το στοιχείο [Game_status](#Game_status).



## Entities


### Board
---------

Το board είναι ένας πίνακας, ο οποίος στο κάθε στοιχείο έχει τα παρακάτω:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `x`                      | H συντεταγμένη x του τετραγώνου              | 1..33                               |
| `y`                      | H συντεταγμένη y του τετραγώνου              | 1..12                               |
| `b_color`                | To χρώμα του τετραγώνου                      | 'B','W'                             |
| `piece_color`            | To χρώμα του πιονιού                         | 'B','W', null                       |
| `piece`                  | To Πιόνι που υπάρχει στο τετράγωνο           | 'P1','P2','P3','P4','P5','P6','P7','P8','P9','P10','P11','P12','P'13','P14','P15', null |
| `moves`                  | Πίνακας με τα δυνατά τετράγωνα (x,y) που μπορεί να μετακινηθεί το τρέχον πιόνι. Αν δεν υπάρχει πιόνι, ή δεν έχει κάνει login ο χρήστης, ή δεν έχει ξεκινήσει το παιχνίδι ή αν δεν υπάρχουν κινήσεις, τότε το πεδίο δεν υπάρχει. |   |


### Players
---------

O κάθε παίκτης έχει τα παρακάτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `username`               | Όνομα παίκτη                                 | String                              |
| `piece_color`            | To χρώμα που παίζει ο παίκτης                | 'B','W'                             |
| `token  `                | To κρυφό token του παίκτη.Επιστρέφεται μόνο τη στιγμή της εισόδου του παίκτη στο παιχνίδι | HEX |
| `last_action`   		   | H τελευταία ενέργεια που έκανε ο παίκτης     |  timestamp                          |

### Game_status
---------

H κατάσταση παιχνιδιού έχει τα παρακάτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `status  `               | Κατάσταση             | 'not active', 'initialized', 'started', 'ended', 'aborded' |
| `p_turn`                 | To χρώμα του παίκτη που παίζει               | 'B','W',null                        |
| `result`                 |  To χρώμα του παίκτη που κέρδισε             |'B','W',null                         |
| `last_change`            | Τελευταία αλλαγή/ενέργεια στην κατάσταση του παιχνιδιού         | timestamp        |
